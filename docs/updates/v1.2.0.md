# MetroBNB Admin Web v1.2.0

**Release Date**: January 15, 2025

## üéØ Major Features

### Invoice Rejection Workflow
- **Partner Rejection**: Partners can now reject draft invoices with notes
- **Admin Response**: Admins can refresh rejected invoices with updated data
- **Status Tracking**: New "rejected" status with orange badge
- **Rejection Notes**: Clear feedback system between partners and admins

### Enhanced Booking Management
- **Payout Date Field**: Added to both create and edit booking forms
- **Improved Form Organization**: Grouped fields into logical sections (Guest Details, Property Info, Payment Details, Administrative)
- **Better UX**: Clean, scannable form layout with icons and visual hierarchy

## üîß Improvements

### Date Formatting
- **Human-Readable Dates**: All dates now display as "Aug 10, 2025" instead of "09/10/2024"
- **Consistent Formatting**: Unified date display across entire application
- **Context-Aware**: Different formats for different use cases (short, full, datetime)

### Booking Filters
- **Complete Filter Support**: Fixed missing payment_received_by and booking_source_id filters
- **Booking Source Display**: Fixed booking source dropdown in advanced filters
- **Better API Integration**: All filter parameters now properly passed to backend

### Authentication & Security
- **Enhanced Session Handling**: Improved 401 error handling with clear user feedback
- **Automatic Logout**: Force logout on session expiry with redirect to login
- **Better Error Messages**: Show actual API error messages instead of generic ones
- **CORS Error Detection**: Handle network issues that might indicate token expiry

### User Management
- **Create User Modal**: Now shows temporary password like reset password feature
- **Credential Display**: Copy-to-clipboard functionality for secure credential sharing
- **Professional UI**: Consistent modal design across user management features

## üêõ Bug Fixes

- Fixed CSV import modal not closing after successful import
- Fixed booking source filter not appearing in booking list
- Fixed login error handling to show actual API messages
- Fixed date formatting inconsistencies across components
- Fixed missing filter parameters in booking API calls

## üé® UI/UX Enhancements

- **Form Organization**: Grouped related fields with clear section headers
- **Visual Hierarchy**: Added icons and better spacing for improved readability
- **Mobile Experience**: Enhanced responsive design for booking forms
- **Information Architecture**: Applied proper grouping principles to reduce cognitive load

## üîÑ API Changes

### New Endpoints
- `PATCH /api/invoices/{id}/reject` - Reject invoice with notes
- `PUT /api/invoices/{id}/refresh` - Refresh rejected invoice data

### Enhanced Endpoints
- Booking creation/update now supports `payout_date` field
- Improved filter support in booking list API

## üì± Technical Improvements

- **Date Utility**: New `useDateFormat` composable for consistent date handling
- **Better Error Handling**: Enhanced API error processing and user feedback
- **Code Organization**: Improved component structure and maintainability
- **Debug Logging**: Added development logging for troubleshooting

---

**Migration Notes**: No breaking changes. All existing functionality remains compatible.