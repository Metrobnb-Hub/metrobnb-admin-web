import{h as G,l as H,r as w,n as O,i as Z,c as d,a as s,y as b,s as y,b as c,w as g,j as u,F as N,q as D,z as V,g as q,f as z,o,d as C,k as E,t as m}from"./DNOTuklV.js";import{a as Q}from"./8hJOxu5z.js";import{_ as R}from"./VnKSk5Dv.js";import{_ as T}from"./DUuJkhp2.js";import"./SYmKFyMt.js";import"./BRKyBaGh.js";import"./DIOUVaTp.js";import"./B7PN2p1L.js";import"./BkXjYmYK.js";import"./CAAWyulb.js";import"./BjgpcN_8.js";import"./QRBWpGKc.js";import"./bwWeQDxp.js";import"./DH4W2Tv0.js";import"./NeIn7EVK.js";const J={class:"space-y-6"},K={class:"flex justify-between items-center"},W={class:"flex space-x-3"},X={class:"flex gap-4 mb-6"},Y={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},ee={class:"space-y-3"},te={class:"flex justify-between items-start"},se={class:"font-semibold text-gray-900 dark:text-white"},ae={class:"text-sm font-medium text-blue-600 dark:text-blue-400"},re={key:0,class:"text-sm text-gray-600 dark:text-gray-400"},ne={key:1,class:"flex flex-wrap gap-1"},oe={key:0,class:"inline-flex px-2 py-1 text-xs bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300 rounded"},le={class:"flex justify-between items-center text-sm text-gray-500 dark:text-gray-400"},ie={class:"text-center py-12"},Ce=G({__name:"index",setup(de){const{partners:x,units:A,loadPartners:B,loadUnits:I}=H(),f=w(!1),v=w(""),h=w("name_asc"),S=[{label:"Name A-Z",value:"name_asc"},{label:"Name Z-A",value:"name_desc"},{label:"Share % High-Low",value:"share_desc"},{label:"Share % Low-High",value:"share_asc"},{label:"Newest First",value:"created_desc"},{label:"Oldest First",value:"created_asc"}],j=a=>{if(!a)return 0;const e=$(a);return e?e.length:0},M=a=>{if(!a)return"N/A";try{return new Date(a).toLocaleDateString()}catch{return"Invalid Date"}},P=O(()=>{if(!Array.isArray(x.value))return[];let a=x.value.filter(n=>{var t,p,U;const i=v.value.toLowerCase(),l=((t=n.name)==null?void 0:t.toLowerCase())||"",r=((p=n.email)==null?void 0:p.toLowerCase())||"",_=((U=n.services)==null?void 0:U.map(F=>{var L;return(L=F.name)==null?void 0:L.toLowerCase()}).join(" "))||"";return l.includes(i)||r.includes(i)||_.includes(i)});const[e,k]=h.value.split("_");return a.sort((n,i)=>{let l,r;switch(e){case"name":l=n.name||"",r=i.name||"";break;case"share":l=n.sharePercentage||0,r=i.sharePercentage||0;break;case"created":l=new Date(n.createdAt||0),r=new Date(i.createdAt||0);break;default:return 0}if(e==="share"||e==="created")return k==="asc"?l-r:r-l;const _=l.localeCompare(r);return k==="asc"?_:-_}),a}),$=a=>Array.isArray(A.value)?A.value.filter(e=>(e.partnerId||e.partner_id)===a):[];return Z(async()=>{await Promise.all([B(),I()])}),(a,e)=>{const k=E,n=q,i=Q,l=R,r=z,_=T;return o(),d("div",J,[s("div",K,[e[6]||(e[6]=s("div",null,[s("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Partners"),s("p",{class:"text-gray-600 dark:text-gray-400"},"Manage your business partners")],-1)),s("div",W,[c(n,{onClick:e[0]||(e[0]=t=>f.value=!0),color:"gray",variant:"outline"},{default:g(()=>[c(k,{name:"i-heroicons-document-text",class:"mr-2"}),e[4]||(e[4]=C(" Generate Invoice ",-1))]),_:1,__:[4]}),c(n,{to:"/partners/create",color:"primary"},{default:g(()=>e[5]||(e[5]=[C("Add Partner",-1)])),_:1,__:[5]})])]),u(x).length?(o(),b(r,{key:0},{default:g(()=>[s("div",X,[c(i,{modelValue:u(v),"onUpdate:modelValue":e[1]||(e[1]=t=>V(v)?v.value=t:null),placeholder:"Search partners...",icon:"i-heroicons-magnifying-glass",class:"flex-1"},null,8,["modelValue"]),c(l,{modelValue:u(h),"onUpdate:modelValue":e[2]||(e[2]=t=>V(h)?h.value=t:null),options:S,class:"w-48"},null,8,["modelValue"])])]),_:1})):y("",!0),u(P).length?(o(),d("div",Y,[(o(!0),d(N,null,D(u(P),t=>(o(),b(r,{key:t.id,class:"hover:shadow-lg transition-shadow cursor-pointer",onClick:p=>a.$router.push(`/partners/${t.id}`)},{default:g(()=>[s("div",ee,[s("div",te,[s("h3",se,m(t.name),1),s("span",ae,m(t.sharePercentage)+"% ",1)]),t.email?(o(),d("div",re,m(t.email),1)):y("",!0),t.services&&t.services.length?(o(),d("div",ne,[(o(!0),d(N,null,D(t.services.slice(0,2),p=>(o(),d("span",{key:p.id,class:"inline-flex px-2 py-1 text-xs bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300 rounded"},m(p.name),1))),128)),t.services.length>2?(o(),d("span",oe," +"+m(t.services.length-2),1)):y("",!0)])):y("",!0),s("div",le,[s("span",null,m(j(t.id))+" units",1),s("span",null,m(M(t.createdAt)),1)])])]),_:2},1032,["onClick"]))),128))])):u(x).length?y("",!0):(o(),b(r,{key:2},{default:g(()=>[s("div",ie,[e[8]||(e[8]=s("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},"No partners yet",-1)),e[9]||(e[9]=s("p",{class:"text-gray-600 dark:text-gray-400 mb-6"},"Get started by adding your first partner",-1)),c(n,{to:"/partners/create",color:"primary"},{default:g(()=>e[7]||(e[7]=[C("Add Partner",-1)])),_:1,__:[7]})])]),_:1})),c(_,{modelValue:u(f),"onUpdate:modelValue":e[3]||(e[3]=t=>V(f)?f.value=t:null)},null,8,["modelValue"])])}}});export{Ce as default};
