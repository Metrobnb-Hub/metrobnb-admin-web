import{_ as T}from"./VnKSk5Dv.js";import{_ as A,a as E}from"./8hJOxu5z.js";import{_ as B}from"./WinUwd0k.js";import{h as F,l as O,N as R,r as J,m as M,n as h,i as z,c as f,a,b as o,w as s,f as G,p as L,o as x,j as n,s as $,t as p,v as b,g as H,d as g}from"./DNOTuklV.js";import{_ as K}from"./BkXjYmYK.js";import{u as Q}from"./bwWeQDxp.js";import{o as W,s as i,c as X,e as Y}from"./NeIn7EVK.js";import"./SYmKFyMt.js";import"./CAAWyulb.js";import"./DH4W2Tv0.js";const Z={class:"max-w-2xl mx-auto space-y-6"},ee={class:"space-y-4"},te={key:0,class:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg"},ne={class:"text-sm space-y-1"},oe={class:"flex justify-between"},ae={class:"font-medium"},re={class:"flex justify-between"},se={class:"flex justify-between"},le={class:"flex justify-end space-x-3 mt-6"},ge=F({__name:"create",setup(de){const{partners:y,loadPartners:V}=O(),{createJournalEntry:v}=L(),{notifySuccess:k,notifyError:U}=Q(),w=R(),c=J(!1),D=W({partnerId:i().min(1,"Partner is required"),type:Y(["credit","debit"]),date:i().min(1,"Date is required"),amount:X.number().min(.01,"Amount must be greater than 0"),description:i().min(1,"Description is required"),reference:i().optional(),notes:i().optional()}),e=M({partnerId:"",type:"credit",date:new Date().toISOString().split("T")[0],amount:0,description:"",reference:"",notes:""}),C=h(()=>y.value.map(l=>({label:l.name,value:l.id}))),I=[{label:"Credit (+) - Partner gets money",value:"credit"},{label:"Debit (-) - Partner owes money",value:"debit"}],j=l=>{const t=y.value.find(u=>u.id===l);return(t==null?void 0:t.name)||""},N=async()=>{try{c.value=!0;const l={partner_id:e.partnerId,type:e.type,date:e.date,amount:e.amount,description:e.description,reference:e.reference||void 0,notes:e.notes||void 0};await v(l),k(`${e.type==="credit"?"Credit":"Debit"} entry created successfully`),w.push("/journal-entries")}catch{U("Failed to create journal entry")}finally{c.value=!1}};return z(V),(l,t)=>{const u=T,d=A,m=E,q=B,_=H,P=K,S=G;return x(),f("div",Z,[t[13]||(t[13]=a("div",null,[a("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Create Journal Entry"),a("p",{class:"text-gray-600 dark:text-gray-400"},"Add a credit or debit entry for a partner")],-1)),o(S,null,{default:s(()=>[o(P,{schema:n(D),state:n(e),onSubmit:N},{default:s(()=>[a("div",ee,[o(d,{label:"Partner",name:"partnerId",required:""},{default:s(()=>[o(u,{modelValue:n(e).partnerId,"onUpdate:modelValue":t[0]||(t[0]=r=>n(e).partnerId=r),options:n(C),placeholder:"Select partner"},null,8,["modelValue","options"])]),_:1}),o(d,{label:"Entry Type",name:"type",required:""},{default:s(()=>[o(u,{modelValue:n(e).type,"onUpdate:modelValue":t[1]||(t[1]=r=>n(e).type=r),options:I},null,8,["modelValue"])]),_:1}),o(d,{label:"Date",name:"date",required:""},{default:s(()=>[o(m,{modelValue:n(e).date,"onUpdate:modelValue":t[2]||(t[2]=r=>n(e).date=r),type:"date"},null,8,["modelValue"])]),_:1}),o(d,{label:"Amount",name:"amount",required:""},{default:s(()=>[o(m,{modelValue:n(e).amount,"onUpdate:modelValue":t[3]||(t[3]=r=>n(e).amount=r),type:"number",step:"0.01",min:"0",placeholder:"0.00"},null,8,["modelValue"])]),_:1}),o(d,{label:"Description",name:"description",required:""},{default:s(()=>[o(m,{modelValue:n(e).description,"onUpdate:modelValue":t[4]||(t[4]=r=>n(e).description=r),placeholder:"Brief description of the entry"},null,8,["modelValue"])]),_:1}),o(d,{label:"Reference",name:"reference"},{default:s(()=>[o(m,{modelValue:n(e).reference,"onUpdate:modelValue":t[5]||(t[5]=r=>n(e).reference=r),placeholder:"Reference number or ID (optional)"},null,8,["modelValue"])]),_:1}),o(d,{label:"Notes",name:"notes"},{default:s(()=>[o(q,{modelValue:n(e).notes,"onUpdate:modelValue":t[6]||(t[6]=r=>n(e).notes=r),placeholder:"Additional notes (optional)",rows:3},null,8,["modelValue"])]),_:1})]),n(e).partnerId&&n(e).type&&n(e).amount?(x(),f("div",te,[t[10]||(t[10]=a("h4",{class:"font-medium text-gray-900 dark:text-white mb-2"},"Preview",-1)),a("div",ne,[a("div",oe,[t[7]||(t[7]=a("span",{class:"text-gray-600 dark:text-gray-400"},"Partner:",-1)),a("span",ae,p(j(n(e).partnerId)),1)]),a("div",re,[t[8]||(t[8]=a("span",{class:"text-gray-600 dark:text-gray-400"},"Type:",-1)),a("span",{class:b(["font-medium",n(e).type==="credit"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"])},p(n(e).type==="credit"?"Credit (+)":"Debit (-)"),3)]),a("div",se,[t[9]||(t[9]=a("span",{class:"text-gray-600 dark:text-gray-400"},"Amount:",-1)),a("span",{class:b(["font-bold text-lg",n(e).type==="credit"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"])},p(n(e).type==="credit"?"+":"-")+"â‚±"+p(Number(n(e).amount||0).toLocaleString()),3)])])])):$("",!0),a("div",le,[o(_,{color:"gray",variant:"ghost",to:"/journal-entries"},{default:s(()=>t[11]||(t[11]=[g("Cancel",-1)])),_:1,__:[11]}),o(_,{type:"submit",color:"primary",loading:n(c)},{default:s(()=>t[12]||(t[12]=[g("Create Entry",-1)])),_:1,__:[12]},8,["loading"])])]),_:1},8,["schema","state"])]),_:1})])}}});export{ge as default};
