import{h as ce,n as F,m as $e,l as ye,x as Y,y as Q,w as r,z as w,j as t,o as g,b as a,a as s,s as W,g as _e,d as k,f as ve,p as se,r as b,i as Le,c as x,k as ze,t as _,F as le,q as me}from"./DNOTuklV.js";import{_ as fe,a as ge}from"./8hJOxu5z.js";import{_ as be}from"./VnKSk5Dv.js";import{_ as Ne}from"./CUyk4a_6.js";import{_ as Oe}from"./CdEyDy8z.js";import{_ as Re}from"./Lwu6USVw.js";import{_ as Be}from"./WinUwd0k.js";import{_ as je}from"./BkXjYmYK.js";import{_ as qe}from"./BjgpcN_8.js";import{u as Z}from"./bwWeQDxp.js";import{o as Ye,s as H,c as We,e as Je}from"./NeIn7EVK.js";import"./SYmKFyMt.js";import"./4gSLflFa.js";import"./DIOUVaTp.js";import"./QRBWpGKc.js";import"./CAAWyulb.js";import"./DDOLqT6N.js";import"./B7PN2p1L.js";import"./DH4W2Tv0.js";const Ge={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},He={class:"flex justify-end space-x-3 mt-6"},Ze=ce({__name:"EditExpenseModal",props:{expense:{},modelValue:{type:Boolean}},emits:["update:modelValue","updated"],setup(ne,{emit:N}){const D=ne,J=N,$=F({get:()=>D.modelValue,set:u=>J("update:modelValue",u)}),K=Ye({partnerId:H().min(1,"Partner is required"),unitId:H().min(1,"Unit is required"),date:H().min(1,"Date is required"),type:Je(["Cleaning","Laundry","Supplies","Wifi","Electricity","Repair","Repairs","Miscellaneous"]),amount:We.number().min(.01,"Amount must be greater than 0"),notes:H().optional()}),i=$e({partnerId:"",unitId:"",date:"",type:"",amount:0,billable:"true",paid:"false",paidDate:"",notes:""}),O=[{label:"Cleaning",value:"Cleaning"},{label:"Laundry",value:"Laundry"},{label:"Supplies",value:"Supplies"},{label:"Wifi",value:"Wifi"},{label:"Electricity",value:"Electricity"},{label:"Repair",value:"Repair"},{label:"Repairs",value:"Repairs"},{label:"Miscellaneous",value:"Miscellaneous"}],j=[{label:"Billable",value:"true"},{label:"Non-billable",value:"false"}],A=[{label:"Unpaid",value:"false"},{label:"Paid",value:"true"}],{partners:L,units:z,loadPartners:M,loadUnits:P}=ye(),{updateExpense:U}=se(),E=F(()=>Array.isArray(L.value)?L.value.map(u=>({label:u.name,value:u.id})):[]),T=F(()=>{if(!i.partnerId||!Array.isArray(z.value))return console.log("No partnerId or units not loaded:",{partnerId:i.partnerId,unitsLoaded:Array.isArray(z.value)}),[];const u=z.value.filter(o=>{const p=o.partnerId||o.partner_id,m=p===i.partnerId;return console.log("Unit filter check:",{unitName:o.name,unitPartnerId:p,selectedPartnerId:i.partnerId,matches:m}),m});return console.log("Available units for partner:",u),u.map(o=>({label:o.name,value:o.id}))});Y(()=>i.partnerId,(u,o)=>{o&&u!==o&&(console.log("Partner changed manually, clearing unit"),i.unitId="")});const C=async()=>{const{notifySuccess:u,notifyError:o}=Z();try{const p={partner_id:i.partnerId,unit_id:i.unitId,date:i.date,type:i.type,amount:i.amount,billable:i.billable==="true",paid:i.paid==="true",notes:i.notes};i.paid==="true"&&i.paidDate?p.paid_date=i.paidDate:i.paid==="false"&&(p.paid_date=null),await U(D.expense.id,p),u("Expense updated successfully"),J("updated"),$.value=!1}catch{o("Failed to update expense")}};return Y(()=>D.expense,u=>{if(u){console.log("Loading expense data:",u);const o=u.partnerId||u.partner_id,p=u.unitId||u.unit_id;console.log("Extracted IDs:",{partnerId:o,unitId:p}),Object.assign(i,{partnerId:o,unitId:p,date:u.date,type:u.type,amount:parseFloat(u.amount)||0,billable:u.billable?"true":"false",paid:u.paid?"true":"false",paidDate:u.paidDate||"",notes:u.notes||""}),console.log("State after assignment:",i)}},{immediate:!0}),Y(()=>i.paid,u=>{u==="true"&&!i.paidDate&&(i.paidDate=new Date().toISOString().split("T")[0])}),Y(()=>D.modelValue,async u=>{u&&await Promise.all([M(),P()])}),(u,o)=>{const p=be,m=fe,h=ge,q=Be,G=_e,X=je,ee=ve,te=qe;return g(),Q(te,{modelValue:t($),"onUpdate:modelValue":o[10]||(o[10]=y=>w($)?$.value=y:null)},{default:r(()=>[a(ee,null,{header:r(()=>o[11]||(o[11]=[s("h3",{class:"text-lg font-semibold"},"Edit Expense",-1)])),default:r(()=>[a(X,{schema:t(K),state:t(i),onSubmit:C},{default:r(()=>[s("div",Ge,[a(m,{label:"Partner",name:"partnerId",required:""},{default:r(()=>[a(p,{modelValue:t(i).partnerId,"onUpdate:modelValue":o[0]||(o[0]=y=>t(i).partnerId=y),options:t(E)},null,8,["modelValue","options"])]),_:1}),a(m,{label:"Unit",name:"unitId",required:""},{default:r(()=>[a(p,{modelValue:t(i).unitId,"onUpdate:modelValue":o[1]||(o[1]=y=>t(i).unitId=y),options:t(T),disabled:!t(i).partnerId},null,8,["modelValue","options","disabled"])]),_:1}),a(m,{label:"Date",name:"date",required:""},{default:r(()=>[a(h,{modelValue:t(i).date,"onUpdate:modelValue":o[2]||(o[2]=y=>t(i).date=y),type:"date"},null,8,["modelValue"])]),_:1}),a(m,{label:"Expense Type",name:"type",required:""},{default:r(()=>[a(p,{modelValue:t(i).type,"onUpdate:modelValue":o[3]||(o[3]=y=>t(i).type=y),options:O},null,8,["modelValue"])]),_:1}),a(m,{label:"Amount",name:"amount",required:""},{default:r(()=>[a(h,{modelValue:t(i).amount,"onUpdate:modelValue":o[4]||(o[4]=y=>t(i).amount=y),type:"number",step:"0.01",min:"0"},null,8,["modelValue"])]),_:1}),a(m,{label:"Billable",name:"billable"},{default:r(()=>[a(p,{modelValue:t(i).billable,"onUpdate:modelValue":o[5]||(o[5]=y=>t(i).billable=y),options:j},null,8,["modelValue"])]),_:1}),a(m,{label:"Payment Status",name:"paid"},{default:r(()=>[a(p,{modelValue:t(i).paid,"onUpdate:modelValue":o[6]||(o[6]=y=>t(i).paid=y),options:A},null,8,["modelValue"])]),_:1}),t(i).paid==="true"?(g(),Q(m,{key:0,label:"Payment Date",name:"paidDate"},{default:r(()=>[a(h,{modelValue:t(i).paidDate,"onUpdate:modelValue":o[7]||(o[7]=y=>t(i).paidDate=y),type:"date"},null,8,["modelValue"])]),_:1})):W("",!0),a(m,{label:"Notes",name:"notes",class:"md:col-span-2"},{default:r(()=>[a(q,{modelValue:t(i).notes,"onUpdate:modelValue":o[8]||(o[8]=y=>t(i).notes=y),placeholder:"Additional details (optional)"},null,8,["modelValue"])]),_:1})]),s("div",He,[a(G,{color:"gray",variant:"ghost",onClick:o[9]||(o[9]=y=>$.value=!1)},{default:r(()=>o[12]||(o[12]=[k("Cancel",-1)])),_:1,__:[12]}),a(G,{type:"submit",color:"primary"},{default:r(()=>o[13]||(o[13]=[k("Update Expense",-1)])),_:1,__:[13]})])]),_:1},8,["schema","state"])]),_:1})]),_:1},8,["modelValue"])}}}),Qe={class:"space-y-3 sm:space-y-6"},Ke={class:"space-y-3"},Xe={class:"flex justify-between items-start gap-3"},et={class:"grid grid-cols-2 sm:grid-cols-3 gap-2 sm:gap-4"},tt={class:"flex items-center"},at={class:"p-2 sm:p-3 bg-red-100 dark:bg-red-900 rounded-lg"},lt={class:"ml-2 sm:ml-4 min-w-0 flex-1"},st={class:"text-lg sm:text-2xl font-bold text-gray-900 dark:text-white truncate"},nt={class:"flex items-center"},ot={class:"p-2 sm:p-3 bg-blue-100 dark:bg-blue-900 rounded-lg"},rt={class:"ml-2 sm:ml-4 min-w-0 flex-1"},it={class:"text-lg sm:text-2xl font-bold text-gray-900 dark:text-white truncate"},dt={class:"flex items-center"},ut={class:"p-2 sm:p-3 bg-green-100 dark:bg-green-900 rounded-lg"},pt={class:"ml-2 sm:ml-4 min-w-0 flex-1"},mt={class:"text-lg sm:text-2xl font-bold text-gray-900 dark:text-white truncate"},ct={class:"flex justify-between items-center"},yt={class:"text-lg font-semibold"},_t={key:0},vt={key:1},ft={class:"mb-4 space-y-3"},gt={class:"flex flex-col sm:flex-row gap-2 sm:gap-4"},bt={class:"flex gap-2"},xt={key:0,class:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 bg-gray-50 dark:bg-gray-800"},ht={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},kt={class:"flex justify-end gap-2 mt-4"},Vt={key:0,class:"flex justify-center py-8"},Ut={key:1},wt={key:0,class:"sm:hidden space-y-3"},St={class:"space-y-3"},Dt={class:"flex justify-between items-start"},At={class:"min-w-0 flex-1"},Et={class:"font-medium text-gray-900 dark:text-white truncate"},It={class:"text-sm text-gray-500 dark:text-gray-400 truncate"},Ft={class:"grid grid-cols-2 gap-3 text-sm"},Mt={class:"font-medium text-red-600 dark:text-red-400"},Pt={class:"font-medium"},Tt={key:0,class:"text-sm text-gray-600 dark:text-gray-400 truncate"},Ct={key:1,class:"hidden sm:block"},$t={class:"font-medium text-gray-900 dark:text-white"},Lt={class:"text-sm text-gray-500 dark:text-gray-400"},zt={class:"font-semibold text-red-600 dark:text-red-400"},Nt={key:2,class:"text-center py-12"},Ot={key:2,class:"flex justify-between items-center mt-6 pt-4 border-t"},Rt={class:"text-sm text-gray-600 dark:text-gray-400"},Bt={class:"flex items-center space-x-2"},jt={class:"flex items-center space-x-1"},qt={key:1,class:"px-2 text-gray-400"},pa=ce({__name:"index",setup(ne){const{partners:N,units:D,loadPartners:J,loadUnits:$}=ye(),{getExpenses:K,deleteExpense:i}=se(),O=b(!1),j=b(null),A=b(""),L=b("date_desc"),z=b(!1),M=b(""),P=b(""),U=b(""),E=b(""),T=b(""),C=b(""),u=b(""),o=b(""),p=b([]),m=b(null),h=b(1),q=b(!1),G=[{label:"Date Newest",value:"date_desc"},{label:"Date Oldest",value:"date_asc"},{label:"Amount High-Low",value:"amount_desc"},{label:"Amount Low-High",value:"amount_asc"},{label:"Type A-Z",value:"type_asc"},{label:"Type Z-A",value:"type_desc"}],X=F(()=>Array.isArray(N.value)?[{label:"All Partners",value:""},...N.value.map(n=>({label:n.name,value:n.id}))]:[]),ee=F(()=>{if(!Array.isArray(D.value))return[];const n=U.value?D.value.filter(e=>e.partner_id===U.value):D.value;return[{label:"All Units",value:""},...n.map(e=>({label:e.name,value:e.id}))]}),te=[{label:"All Types",value:""},{label:"Cleaning",value:"Cleaning"},{label:"Laundry",value:"Laundry"},{label:"Supplies",value:"Supplies"},{label:"Wifi",value:"Wifi"},{label:"Electricity",value:"Electricity"},{label:"Repair",value:"Repair"},{label:"Repairs",value:"Repairs"},{label:"Miscellaneous",value:"Miscellaneous"}],y=[{label:"All Status",value:""},{label:"Paid",value:"true"},{label:"Unpaid",value:"false"}],xe=[{key:"partner",label:"Partner / Unit"},{key:"type",label:"Type"},{key:"amount",label:"Amount"},{key:"paid",label:"Status"},{key:"date",label:"Date"},{key:"actions",label:""}],he=F(()=>{const n=[],e=new Date().getFullYear();for(let d=e-5;d<=e+2;d++)n.push({label:d.toString(),value:d.toString()});return[{label:"All Years",value:""},...n.reverse()]}),ke=F(()=>[{label:"All Months",value:""},...[{label:"January",value:"1"},{label:"February",value:"2"},{label:"March",value:"3"},{label:"April",value:"4"},{label:"May",value:"5"},{label:"June",value:"6"},{label:"July",value:"7"},{label:"August",value:"8"},{label:"September",value:"9"},{label:"October",value:"10"},{label:"November",value:"11"},{label:"December",value:"12"}]]),I=async()=>{try{q.value=!0;const[n,e]=L.value.split("_"),d={sort_by:n,sort_order:e,page:h.value,limit:20};A.value&&A.value.trim()&&(d.search=A.value.trim()),U.value&&(d.partner_id=U.value),E.value&&(d.unit_id=E.value),M.value&&(d.type=M.value),P.value&&(d.paid=P.value==="true");let c=u.value,v=o.value;if(T.value||C.value){const V=T.value||new Date().getFullYear(),S=C.value||"";if(S){const R=parseInt(S);c=`${V}-${R.toString().padStart(2,"0")}-01`;const B=new Date(V,R,0).getDate();v=`${V}-${R.toString().padStart(2,"0")}-${B}`}else c=`${V}-01-01`,v=`${V}-12-31`}c&&(d.start_date=c),v&&(d.end_date=v);const f=await K(d);f.data&&f.pagination?(p.value=f.data,m.value=f.pagination):(p.value=Array.isArray(f)?f:f.data||[],m.value=null)}catch(n){console.error("Failed to load expenses:",n),p.value=[],m.value=null;const{notifyError:e}=Z();e("Failed to load expenses")}finally{q.value=!1}},Ve=F(()=>{if(!Array.isArray(p.value)||p.value.length===0)return 0;const n=new Date,e=n.getMonth(),d=n.getFullYear();return p.value.filter(c=>{if(!c||!c.date)return!1;try{const v=new Date(c.date);return v.getMonth()===e&&v.getFullYear()===d}catch{return!1}}).reduce((c,v)=>{const f=parseFloat(v.amount);return c+f},0)}),Ue=F(()=>!Array.isArray(p.value)||p.value.length===0?0:p.value.reduce((n,e)=>{const d=parseFloat(e.amount);return n+d},0)),oe=n=>{if(!n||!Array.isArray(N.value))return"Unknown Partner";const e=N.value.find(d=>d&&d.id===n);return(e==null?void 0:e.name)||"Unknown Partner"},re=n=>{if(!n||!Array.isArray(D.value))return"Unknown Unit";const e=D.value.find(d=>d&&d.id===n);return(e==null?void 0:e.name)||"Unknown Unit"},ie=n=>({Cleaning:"blue",Laundry:"purple",Supplies:"green",Wifi:"indigo",Electricity:"yellow",Repair:"red",Repairs:"red",Miscellaneous:"gray",Misc:"gray"})[n]||"gray",de=n=>new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"2-digit"}),ue=n=>[[{label:n.paid?"Mark Unpaid":"Mark Paid",icon:n.paid?"i-heroicons-x-circle":"i-heroicons-check-circle",click:()=>De(n)}],[{label:"Edit",icon:"i-heroicons-pencil-square",click:()=>we(n)}],[{label:"Delete",icon:"i-heroicons-trash",click:()=>Se(n.id)}]],we=n=>{j.value=n,O.value=!0},Se=async n=>{const{notifySuccess:e,notifyError:d}=Z();try{await i(n),await I(),e("Expense deleted successfully")}catch{d("Failed to delete expense")}},De=async n=>{const{notifySuccess:e,notifyError:d}=Z(),{updateExpense:c}=se();try{const v={paid:!n.paid,paid_date:n.paid?null:new Date().toISOString().split("T")[0],billable:n.billable,amount:n.amount,type:n.type,notes:n.notes};await c(n.id,v),await I(),e(`Expense marked as ${n.paid?"unpaid":"paid"}`)}catch{d("Failed to update payment status")}},Ae=()=>{j.value=null,I()},ae=n=>{h.value=n,I()},Ee=()=>{if(!m.value)return[];const n=m.value.total_pages,e=h.value,d=[];if(n<=7)for(let c=1;c<=n;c++)d.push(c);else{d.push(1),e>3&&d.push("...");const c=Math.max(2,e-1),v=Math.min(n-1,e+1);for(let f=c;f<=v;f++)f!==1&&f!==n&&d.push(f);e<n-2&&d.push("..."),n>1&&d.push(n)}return d},Ie=()=>{T.value="",C.value="",U.value="",E.value="",M.value="",P.value="",u.value="",o.value="",A.value="",h.value=1,I()},Fe=()=>{h.value=1,I()},Me=()=>{h.value=1,I()};let pe;const Pe=()=>{clearTimeout(pe),pe=setTimeout(Me,300)};return Y(()=>U.value,()=>{E.value=""}),Le(async()=>{await Promise.all([J(),$(),I()])}),(n,e)=>{const d=ze,c=_e,v=ve,f=ge,V=be,S=fe,R=Ne,B=Oe,Te=Re,Ce=Ze;return g(),x("div",Qe,[s("div",Ke,[s("div",Xe,[e[15]||(e[15]=s("div",{class:"min-w-0 flex-1"},[s("h1",{class:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white truncate"},"Expenses"),s("p",{class:"text-sm text-gray-600 dark:text-gray-400 hidden sm:block"},"Manage partner expenses and charges")],-1)),a(c,{to:"/expenses/create",color:"primary",size:"xs",class:"sm:size-sm"},{default:r(()=>[a(d,{name:"i-heroicons-plus",class:"sm:mr-1"}),e[14]||(e[14]=s("span",{class:"hidden sm:inline"},"Add Expense",-1))]),_:1,__:[14]})])]),s("div",et,[a(v,{class:"p-3 sm:p-4"},{default:r(()=>[s("div",tt,[s("div",at,[a(d,{name:"i-heroicons-minus-circle",class:"h-4 w-4 sm:h-6 sm:w-6 text-red-600 dark:text-red-400"})]),s("div",lt,[e[16]||(e[16]=s("p",{class:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400"},"Total",-1)),s("p",st,"₱"+_(t(Ue).toLocaleString("en-US",{minimumFractionDigits:0})),1)])])]),_:1}),a(v,{class:"p-3 sm:p-4"},{default:r(()=>{var l;return[s("div",nt,[s("div",ot,[a(d,{name:"i-heroicons-document-text",class:"h-4 w-4 sm:h-6 sm:w-6 text-blue-600 dark:text-blue-400"})]),s("div",rt,[e[17]||(e[17]=s("p",{class:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400"},"Records",-1)),s("p",it,_(((l=t(p))==null?void 0:l.length)||0),1)])])]}),_:1}),a(v,{class:"p-3 sm:p-4 col-span-2 sm:col-span-1"},{default:r(()=>[s("div",dt,[s("div",ut,[a(d,{name:"i-heroicons-calendar",class:"h-4 w-4 sm:h-6 sm:w-6 text-green-600 dark:text-green-400"})]),s("div",pt,[e[18]||(e[18]=s("p",{class:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400"},"This Month",-1)),s("p",mt,"₱"+_(t(Ve).toLocaleString("en-US",{minimumFractionDigits:0})),1)])])]),_:1})]),a(v,null,{header:r(()=>[s("div",ct,[s("h3",yt,[e[19]||(e[19]=k(" All Expenses ",-1)),t(m)?(g(),x("span",_t,"("+_(t(m).total_items)+" total)",1)):(g(),x("span",vt,"("+_(t(p).length)+")",1))])])]),default:r(()=>[s("div",ft,[s("div",gt,[a(f,{modelValue:t(A),"onUpdate:modelValue":e[0]||(e[0]=l=>w(A)?A.value=l:null),placeholder:"Search expenses...",icon:"i-heroicons-magnifying-glass",class:"w-full sm:flex-1",size:"sm",onInput:Pe},null,8,["modelValue"]),s("div",bt,[a(V,{modelValue:t(L),"onUpdate:modelValue":e[1]||(e[1]=l=>w(L)?L.value=l:null),options:G,class:"flex-1 sm:w-auto",size:"sm",onChange:I},null,8,["modelValue"]),a(c,{variant:"outline",size:"sm",onClick:e[2]||(e[2]=l=>z.value=!t(z))},{default:r(()=>[a(d,{name:"i-heroicons-funnel",class:"sm:mr-1"}),e[20]||(e[20]=s("span",{class:"hidden sm:inline"},"Filters",-1))]),_:1,__:[20]})])]),t(z)?(g(),x("div",xt,[s("div",ht,[a(S,{label:"Year"},{default:r(()=>[a(V,{modelValue:t(T),"onUpdate:modelValue":e[3]||(e[3]=l=>w(T)?T.value=l:null),options:t(he),placeholder:"All years"},null,8,["modelValue","options"])]),_:1}),a(S,{label:"Month"},{default:r(()=>[a(V,{modelValue:t(C),"onUpdate:modelValue":e[4]||(e[4]=l=>w(C)?C.value=l:null),options:t(ke),placeholder:"All months"},null,8,["modelValue","options"])]),_:1}),a(S,{label:"Partner"},{default:r(()=>[a(V,{modelValue:t(U),"onUpdate:modelValue":e[5]||(e[5]=l=>w(U)?U.value=l:null),options:t(X),placeholder:"Select partner"},null,8,["modelValue","options"])]),_:1}),a(S,{label:"Unit"},{default:r(()=>[a(V,{modelValue:t(E),"onUpdate:modelValue":e[6]||(e[6]=l=>w(E)?E.value=l:null),options:t(ee),placeholder:"Select unit",disabled:!t(U)},null,8,["modelValue","options","disabled"])]),_:1}),a(S,{label:"Type"},{default:r(()=>[a(V,{modelValue:t(M),"onUpdate:modelValue":e[7]||(e[7]=l=>w(M)?M.value=l:null),options:te,placeholder:"Select type"},null,8,["modelValue"])]),_:1}),a(S,{label:"Payment Status"},{default:r(()=>[a(V,{modelValue:t(P),"onUpdate:modelValue":e[8]||(e[8]=l=>w(P)?P.value=l:null),options:y,placeholder:"Select status"},null,8,["modelValue"])]),_:1}),a(S,{label:"Start Date"},{default:r(()=>[a(f,{modelValue:t(u),"onUpdate:modelValue":e[9]||(e[9]=l=>w(u)?u.value=l:null),type:"date",placeholder:"From date"},null,8,["modelValue"])]),_:1}),a(S,{label:"End Date"},{default:r(()=>[a(f,{modelValue:t(o),"onUpdate:modelValue":e[10]||(e[10]=l=>w(o)?o.value=l:null),type:"date",placeholder:"To date"},null,8,["modelValue"])]),_:1})]),s("div",kt,[a(c,{variant:"ghost",onClick:Ie},{default:r(()=>e[21]||(e[21]=[k(" Clear All ",-1)])),_:1,__:[21]}),a(c,{color:"primary",onClick:Fe},{default:r(()=>e[22]||(e[22]=[k(" Apply Filters ",-1)])),_:1,__:[22]})])])):W("",!0)]),t(q)?(g(),x("div",Vt,e[23]||(e[23]=[s("div",{class:"text-gray-500"},"Loading expenses...",-1)]))):(g(),x("div",Ut,[t(p).length?(g(),x("div",wt,[(g(!0),x(le,null,me(t(p),l=>(g(),Q(v,{key:l.id,class:"p-4"},{default:r(()=>[s("div",St,[s("div",Dt,[s("div",At,[s("h3",Et,_(oe(l.partner_id)),1),s("p",It,_(re(l.unit_id)),1)]),a(R,{items:ue(l)},{default:r(()=>[a(c,{color:"gray",variant:"ghost",icon:"i-heroicons-ellipsis-horizontal",size:"xs"})]),_:2},1032,["items"])]),s("div",Ft,[s("div",null,[e[24]||(e[24]=s("span",{class:"text-gray-500 dark:text-gray-400"},"Type:",-1)),a(B,{color:ie(l.type),size:"xs",class:"ml-1"},{default:r(()=>[k(_(l.type),1)]),_:2},1032,["color"])]),s("div",null,[e[25]||(e[25]=s("span",{class:"text-gray-500 dark:text-gray-400"},"Amount:",-1)),s("p",Mt,"₱"+_(parseFloat(l.amount).toLocaleString("en-US",{minimumFractionDigits:0})),1)]),s("div",null,[e[26]||(e[26]=s("span",{class:"text-gray-500 dark:text-gray-400"},"Status:",-1)),a(B,{color:l.paid?"green":"red",size:"xs",class:"ml-1"},{default:r(()=>[k(_(l.paid?"Paid":"Unpaid"),1)]),_:2},1032,["color"])]),s("div",null,[e[27]||(e[27]=s("span",{class:"text-gray-500 dark:text-gray-400"},"Date:",-1)),s("p",Pt,_(de(l.date)),1)])]),l.notes?(g(),x("p",Tt,_(l.notes),1)):W("",!0)])]),_:2},1024))),128))])):W("",!0),t(p).length?(g(),x("div",Ct,[a(Te,{rows:t(p),columns:xe},{"partner-data":r(({row:l})=>[s("div",null,[s("div",$t,_(oe(l.partner_id)),1),s("div",Lt,_(re(l.unit_id)),1)])]),"type-data":r(({row:l})=>[a(B,{color:ie(l.type),size:"xs"},{default:r(()=>[k(_(l.type),1)]),_:2},1032,["color"])]),"amount-data":r(({row:l})=>[s("span",zt," ₱"+_(parseFloat(l.amount).toLocaleString("en-US",{minimumFractionDigits:2})),1)]),"paid-data":r(({row:l})=>[a(B,{color:l.paid?"green":"red",size:"xs"},{default:r(()=>[k(_(l.paid?"Paid":"Unpaid"),1)]),_:2},1032,["color"])]),"date-data":r(({row:l})=>[k(_(de(l.date)),1)]),"actions-data":r(({row:l})=>[a(R,{items:ue(l)},{default:r(()=>[a(c,{color:"gray",variant:"ghost",icon:"i-heroicons-ellipsis-horizontal",size:"sm"})]),_:2},1032,["items"])]),_:1},8,["rows"])])):(g(),x("div",Nt,[e[29]||(e[29]=s("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},"No expenses yet",-1)),e[30]||(e[30]=s("p",{class:"text-gray-600 dark:text-gray-400 mb-6"},"Start by recording your first expense",-1)),a(c,{to:"/expenses/create",color:"primary"},{default:r(()=>e[28]||(e[28]=[k("Add Expense",-1)])),_:1,__:[28]})]))])),t(m)&&t(m).total_pages>1?(g(),x("div",Ot,[s("div",Rt," Showing "+_((t(m).current_page-1)*t(m).per_page+1)+" to "+_(Math.min(t(m).current_page*t(m).per_page,t(m).total_items))+" of "+_(t(m).total_items)+" results ",1),s("div",Bt,[a(c,{disabled:!t(m).has_prev,onClick:e[11]||(e[11]=l=>ae(t(h)-1)),color:"gray",variant:"outline",size:"sm"},{default:r(()=>e[31]||(e[31]=[k(" Previous ",-1)])),_:1,__:[31]},8,["disabled"]),s("div",jt,[(g(!0),x(le,null,me(Ee(),l=>(g(),x(le,{key:l},[l!=="..."?(g(),Q(c,{key:0,color:l===t(h)?"primary":"gray",variant:l===t(h)?"solid":"outline",onClick:Yt=>ae(l),size:"sm",class:"min-w-[2rem]"},{default:r(()=>[k(_(l),1)]),_:2},1032,["color","variant","onClick"])):(g(),x("span",qt,"..."))],64))),128))]),a(c,{disabled:!t(m).has_next,onClick:e[12]||(e[12]=l=>ae(t(h)+1)),color:"gray",variant:"outline",size:"sm"},{default:r(()=>e[32]||(e[32]=[k(" Next ",-1)])),_:1,__:[32]},8,["disabled"])])])):W("",!0)]),_:1}),a(Ce,{modelValue:t(O),"onUpdate:modelValue":e[13]||(e[13]=l=>w(O)?O.value=l:null),expense:t(j),onUpdated:Ae},null,8,["modelValue","expense"])])}}});export{pa as default};
