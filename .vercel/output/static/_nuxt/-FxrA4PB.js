import{h as W,n as D,m as te,r as h,x as G,y as ne,w as i,z as N,j as a,o as k,b as s,a as e,c as w,s as J,t as _,g as H,d as j,f as K,A as ae,i as oe,k as se,F as Y,q,v as re}from"./DNOTuklV.js";import{_ as X}from"./VnKSk5Dv.js";import{_ as Z,a as ee}from"./8hJOxu5z.js";import{_ as le}from"./BRKyBaGh.js";import{_ as de}from"./BkXjYmYK.js";import{_ as ie}from"./BjgpcN_8.js";import{u as ue}from"./DH4W2Tv0.js";import{u as me}from"./BpUj2rcc.js";import"./SYmKFyMt.js";import"./DIOUVaTp.js";import"./B7PN2p1L.js";import"./CAAWyulb.js";import"./QRBWpGKc.js";const pe={class:"space-y-4"},ce={class:"grid grid-cols-2 gap-4"},ge={class:"ml-3 text-sm text-gray-600 dark:text-gray-400"},_e={key:0,class:"grid grid-cols-2 gap-4"},ye={class:"flex justify-end space-x-3 mt-6"},ve=W({__name:"QuickInvoiceModal",props:{modelValue:{type:Boolean},preselectedPartnerId:{}},emits:["update:modelValue"],setup(Q,{emit:T}){const S=Q,L=T,V=D({get:()=>S.modelValue,set:u=>L("update:modelValue",u)}),M=new Date,R=M.getFullYear().toString(),C=(M.getMonth()+1).toString(),t=te({partnerId:"",unitId:"",year:R,month:C,useCustomDates:!1,startDate:"",endDate:""}),f=h(!1),U=[{id:"partner-1",name:"Casa Aurea Properties",sharePercentage:15},{id:"partner-2",name:"Azure Bahamas Resort",sharePercentage:20},{id:"partner-3",name:"Metro Condos Inc",sharePercentage:35}],v=[{id:"unit-1",name:"Casa Aurea â€“ Azure Bahamas 945",partnerId:"partner-1"},{id:"unit-2",name:"Azure Resort Villa 12",partnerId:"partner-2"},{id:"unit-3",name:"Metro Tower Unit 2501",partnerId:"partner-3"},{id:"unit-4",name:"Metro Tower Unit 1205",partnerId:"partner-3"}],P=[{id:"booking-1",guestName:"John Smith",date:"2024-12-15",baseAmount:5e3,addons:[{type:"early_checkin",amount:300}],unitId:"unit-1",partnerId:"partner-1",paymentReceivedBy:"metrobnb",amountPaid:5300},{id:"booking-2",guestName:"Maria Garcia",date:"2024-12-18",baseAmount:6e3,addons:[{type:"late_checkout",amount:300}],unitId:"unit-2",partnerId:"partner-2",paymentReceivedBy:"partner",amountPaid:6300},{id:"booking-3",guestName:"Robert Wilson",date:"2024-12-22",baseAmount:4500,addons:[{type:"parking",amount:200}],unitId:"unit-1",partnerId:"partner-1",paymentReceivedBy:"partner",amountPaid:4700},{id:"booking-4",guestName:"Jennifer Lee",date:"2024-12-25",baseAmount:4500,addons:[{type:"late_checkout",amount:300}],unitId:"unit-3",partnerId:"partner-3",paymentReceivedBy:"metrobnb",amountPaid:4800},{id:"booking-5",guestName:"Michael Chen",date:"2024-12-08",baseAmount:3200,addons:[{type:"early_checkin",amount:300}],unitId:"unit-3",partnerId:"partner-3",paymentReceivedBy:"partner",amountPaid:3500},{id:"booking-6",guestName:"Sarah Martinez",date:"2024-12-12",baseAmount:2800,addons:[],unitId:"unit-3",partnerId:"partner-3",paymentReceivedBy:"partner",amountPaid:2800},{id:"booking-7",guestName:"David Kim",date:"2024-12-28",baseAmount:3e3,addons:[{type:"parking",amount:200}],unitId:"unit-3",partnerId:"partner-3",paymentReceivedBy:"metrobnb",amountPaid:3200},{id:"booking-8",guestName:"Lisa Wang",date:"2024-12-05",baseAmount:5500,addons:[{type:"early_checkin",amount:300}],unitId:"unit-3",partnerId:"partner-3",paymentReceivedBy:"partner",amountPaid:5800},{id:"booking-9",guestName:"Carlos Rodriguez",date:"2024-12-15",baseAmount:4200,addons:[{type:"late_checkout",amount:300}],unitId:"unit-3",partnerId:"partner-3",paymentReceivedBy:"metrobnb",amountPaid:4500},{id:"booking-10",guestName:"Emma Thompson",date:"2024-12-20",baseAmount:6800,addons:[],unitId:"unit-3",partnerId:"partner-3",paymentReceivedBy:"partner",amountPaid:6800},{id:"booking-11",guestName:"Ahmed Hassan",date:"2024-12-03",baseAmount:2300,addons:[{type:"parking",amount:200}],unitId:"unit-3",partnerId:"partner-3",paymentReceivedBy:"metrobnb",amountPaid:2500},{id:"booking-12",guestName:"Sophie Miller",date:"2024-12-30",baseAmount:7200,addons:[{type:"early_checkin",amount:300},{type:"parking",amount:200}],unitId:"unit-3",partnerId:"partner-3",paymentReceivedBy:"partner",amountPaid:7700}],A=[{id:"expense-1",partnerId:"partner-1",unitId:"unit-1",date:"2024-12-10",type:"cleaning",amount:800,notes:"Deep cleaning after checkout"},{id:"expense-2",partnerId:"partner-2",unitId:"unit-2",date:"2024-12-12",type:"utilities",amount:1200,notes:"Electricity and water bill"},{id:"expense-3",partnerId:"partner-1",unitId:"unit-1",date:"2024-12-20",type:"repair",amount:1500,notes:"Fixed air conditioning"},{id:"expense-4",partnerId:"partner-3",unitId:"unit-3",date:"2024-12-05",type:"repair",amount:2500,notes:"Fixed plumbing leak in bathroom"},{id:"expense-5",partnerId:"partner-3",unitId:"unit-3",date:"2024-12-11",type:"repair",amount:1800,notes:"Replaced broken air conditioning unit"},{id:"expense-6",partnerId:"partner-3",unitId:"unit-3",date:"2024-12-18",type:"repair",amount:950,notes:"Fixed electrical outlet and lighting"},{id:"expense-7",partnerId:"partner-3",unitId:"unit-3",date:"2024-12-03",type:"utilities",amount:1200,notes:"WiFi upgrade and monthly internet bill"}],O=D(()=>U.map(u=>({label:u.name,value:u.id}))),z=D(()=>t.partnerId?v.filter(u=>u.partnerId===t.partnerId).map(u=>({label:u.name,value:u.id})):[]),F=D(()=>{const u=[],l=new Date().getFullYear();for(let c=l-5;c<=l+2;c++)u.push({label:c.toString(),value:c.toString()});return u.reverse()}),$=D(()=>[{label:"January",value:"1"},{label:"February",value:"2"},{label:"March",value:"3"},{label:"April",value:"4"},{label:"May",value:"5"},{label:"June",value:"6"},{label:"July",value:"7"},{label:"August",value:"8"},{label:"September",value:"9"},{label:"October",value:"10"},{label:"November",value:"11"},{label:"December",value:"12"}]);G(()=>t.partnerId,()=>{t.unitId=""}),G(()=>S.preselectedPartnerId,u=>{u&&(t.partnerId=u)},{immediate:!0});const E=async()=>{try{f.value=!0;const u=U.find(o=>o.id===t.partnerId);if(!u)throw new Error("Partner not found");console.log("Form state:",t),console.log("Selected partner:",u);let l,c;if(t.useCustomDates)l=new Date(t.startDate),c=new Date(t.endDate);else{const o=parseInt(t.year),r=parseInt(t.month),g=new Date(o,r-1,1),p=new Date(o,r,0),I=`${o}-${r.toString().padStart(2,"0")}-01`,m=`${o}-${r.toString().padStart(2,"0")}-${p.getDate().toString().padStart(2,"0")}`;l=new Date(I),c=new Date(m)}const y=P.filter(o=>{const r=new Date(o.date),g=o.partnerId===t.partnerId,p=!t.unitId||o.unitId===t.unitId,I=r>=l&&r<=c;return console.log("Booking filter:",{booking:o.guestName,bookingDate:o.date,partnerId:o.partnerId,selectedPartnerId:t.partnerId,matchesPartner:g,matchesUnit:p,inDateRange:I}),g&&p&&I}),b=A.filter(o=>{const r=new Date(o.date),g=o.partnerId===t.partnerId,p=!t.unitId||o.unitId===t.unitId,I=r>=l&&r<=c;return console.log("Expense filter:",{expense:o.type,expenseDate:o.date,partnerId:o.partnerId,selectedPartnerId:t.partnerId,matchesPartner:g,matchesUnit:p,inDateRange:I}),g&&p&&I});console.log("Filtered results:",{filteredBookings:y,filteredExpenses:b});const d=l.toLocaleDateString("en-US",{month:"long",year:"numeric"}),n=c.toLocaleDateString("en-US",{month:"long",year:"numeric"}),x=d===n?d:`${d} - ${n}`,B={partnerName:u.name,period:x,sharePercentage:u.sharePercentage,bookings:y.map(o=>{var r;return{date:o.date,guestName:o.guestName,unitName:((r=v.find(g=>g.id===o.unitId))==null?void 0:r.name)||"Unknown Unit",source:"Mock Data",baseAmount:o.baseAmount,addons:o.addons.reduce((g,p)=>g+p.amount,0),total:o.baseAmount+o.addons.reduce((g,p)=>g+p.amount,0),paymentReceivedBy:o.paymentReceivedBy,actualAmountReceived:o.amountPaid}}),expenses:b.map(o=>{var r;return{date:o.date,unitName:((r=v.find(g=>g.id===o.unitId))==null?void 0:r.name)||"Unknown Unit",type:o.type,notes:o.notes,amount:o.amount}})};localStorage.setItem("current-invoice",JSON.stringify(B)),await ae("/invoice-demo"),V.value=!1}catch{ue().add({title:"Error",description:"Failed to generate mock invoice",color:"red"})}finally{f.value=!1}};return(u,l)=>{const c=X,y=Z,b=le,d=ee,n=H,x=de,B=K,o=ie;return k(),ne(o,{modelValue:a(V),"onUpdate:modelValue":l[8]||(l[8]=r=>N(V)?V.value=r:null),ui:{width:"w-full max-w-2xl"}},{default:i(()=>[s(B,null,{header:i(()=>l[9]||(l[9]=[e("h3",{class:"text-lg font-semibold"},"Quick Invoice Generator (Mock Data)",-1)])),default:i(()=>[s(x,{state:a(t),onSubmit:E},{default:i(()=>[e("div",pe,[s(y,{label:"Partner",name:"partnerId",required:""},{default:i(()=>[s(c,{modelValue:a(t).partnerId,"onUpdate:modelValue":l[0]||(l[0]=r=>a(t).partnerId=r),options:a(O)},null,8,["modelValue","options"])]),_:1}),s(y,{label:"Unit",name:"unitId"},{default:i(()=>[s(c,{modelValue:a(t).unitId,"onUpdate:modelValue":l[1]||(l[1]=r=>a(t).unitId=r),options:a(z),disabled:!a(t).partnerId,placeholder:"All units (optional)"},null,8,["modelValue","options","disabled"])]),_:1}),e("div",ce,[s(y,{label:"Year",name:"year",required:""},{default:i(()=>[s(c,{modelValue:a(t).year,"onUpdate:modelValue":l[2]||(l[2]=r=>a(t).year=r),options:a(F)},null,8,["modelValue","options"])]),_:1}),s(y,{label:"Month",name:"month",required:""},{default:i(()=>[s(c,{modelValue:a(t).month,"onUpdate:modelValue":l[3]||(l[3]=r=>a(t).month=r),options:a($)},null,8,["modelValue","options"])]),_:1})]),s(y,{label:"Custom Date Range",name:"useCustomDates"},{default:i(()=>[s(b,{modelValue:a(t).useCustomDates,"onUpdate:modelValue":l[4]||(l[4]=r=>a(t).useCustomDates=r)},null,8,["modelValue"]),e("span",ge,_(a(t).useCustomDates?"Using custom date range":"Using month/year selection"),1)]),_:1}),a(t).useCustomDates?(k(),w("div",_e,[s(y,{label:"Start Date",name:"startDate"},{default:i(()=>[s(d,{modelValue:a(t).startDate,"onUpdate:modelValue":l[5]||(l[5]=r=>a(t).startDate=r),type:"date"},null,8,["modelValue"])]),_:1}),s(y,{label:"End Date",name:"endDate"},{default:i(()=>[s(d,{modelValue:a(t).endDate,"onUpdate:modelValue":l[6]||(l[6]=r=>a(t).endDate=r),type:"date"},null,8,["modelValue"])]),_:1})])):J("",!0)]),e("div",ye,[s(n,{color:"gray",variant:"ghost",onClick:l[7]||(l[7]=r=>V.value=!1)},{default:i(()=>l[10]||(l[10]=[j("Cancel",-1)])),_:1,__:[10]}),s(n,{type:"submit",color:"primary",loading:a(f)},{default:i(()=>l[11]||(l[11]=[j(" Generate Mock Invoice ",-1)])),_:1,__:[11]},8,["loading"])])]),_:1},8,["state"])]),_:1})]),_:1},8,["modelValue"])}}}),xe={class:"max-w-6xl mx-auto space-y-6"},fe={class:"flex justify-between items-start"},be={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Ie={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},he={class:"flex items-center"},ke={class:"p-3 bg-green-100 dark:bg-green-900 rounded-lg"},De={class:"ml-4"},Ue={class:"text-xl font-bold text-gray-900 dark:text-white"},we={class:"flex items-center"},Ve={class:"p-3 bg-red-100 dark:bg-red-900 rounded-lg"},Pe={class:"ml-4"},Ae={class:"text-xl font-bold text-gray-900 dark:text-white"},Se={class:"flex items-center"},Be={class:"p-3 bg-blue-100 dark:bg-blue-900 rounded-lg"},Ne={class:"ml-4"},Me={class:"text-xl font-bold text-gray-900 dark:text-white"},Re={class:"flex items-center"},Ce={class:"p-3 bg-purple-100 dark:bg-purple-900 rounded-lg"},Fe={class:"ml-4"},$e={class:"text-xl font-bold text-gray-900 dark:text-white"},Ee={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Te={class:"text-lg font-semibold"},Le={class:"space-y-3"},Oe={class:"flex justify-between items-start"},ze={class:"font-medium"},Ge={class:"text-sm text-gray-500"},Je={class:"text-xs text-gray-400"},je={class:"text-right"},Qe={class:"font-semibold text-green-600"},Ye={key:0,class:"text-center py-4 text-gray-500"},qe={class:"text-lg font-semibold"},We={class:"space-y-3"},He={class:"flex justify-between items-start"},Ke={class:"font-medium"},Xe={class:"text-sm text-gray-500"},Ze={class:"text-xs text-gray-400"},et={class:"text-right"},tt={class:"font-semibold text-red-600"},nt={key:0,class:"text-center py-4 text-gray-500"},yt=W({__name:"mock-demo",setup(Q){const{getPartners:T,getUnits:S,getUnitsByPartner:L,getBookings:V,getExpenses:M,getBookingTotal:R}=me(),C=h([]),t=h([]),f=h([]),U=h([]),v=h(""),P=h(""),A=h(""),O=D(()=>[{label:"All Partners",value:""},...C.value.map(d=>({label:d.name,value:d.id}))]),z=D(()=>{if(!v.value)return[];const d=t.value.filter(n=>n.partnerId===v.value);return[{label:"All Units",value:""},...d.map(n=>({label:n.name,value:n.id}))]}),F=D(()=>f.value.filter(d=>d.bookingStatus!=="refunded").reduce((d,n)=>d+R(n),0)),$=D(()=>U.value.reduce((d,n)=>d+n.amount,0)),E=d=>{var n;return((n=t.value.find(x=>x.id===d))==null?void 0:n.name)||"Unknown Unit"},u=d=>({cleaning:"Cleaning",laundry:"Laundry",utilities:"Utilities",repair:"Repair",misc:"Miscellaneous"})[d]||d,l=d=>({unpaid:"bg-red-100 text-red-800",partial:"bg-yellow-100 text-yellow-800",fully_paid:"bg-green-100 text-green-800"})[d]||"bg-gray-100 text-gray-800",c=d=>new Date(d).toLocaleDateString(),y=async()=>{const d={partnerId:v.value||void 0,unitId:P.value||void 0,month:A.value||void 0};f.value=await V(d),U.value=await M(d)};G(()=>v.value,async()=>{P.value="",v.value?t.value=await L(v.value):t.value=await S()});const b=h(!1);return oe(async()=>{C.value=await T(),t.value=await S(),await y()}),(d,n)=>{const x=se,B=H,o=X,r=Z,g=ee,p=K,I=ve;return k(),w("div",xe,[e("div",fe,[n[6]||(n[6]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Mock API Demo"),e("p",{class:"text-gray-600 dark:text-gray-400"},"Testing mock data and API functions")],-1)),s(B,{onClick:n[0]||(n[0]=m=>b.value=!0),color:"primary"},{default:i(()=>[s(x,{name:"i-heroicons-document-text",class:"mr-2"}),n[5]||(n[5]=j(" Quick Invoice ",-1))]),_:1,__:[5]})]),s(p,null,{header:i(()=>n[7]||(n[7]=[e("h3",{class:"text-lg font-semibold"},"Filters",-1)])),default:i(()=>[e("div",be,[s(r,{label:"Partner"},{default:i(()=>[s(o,{modelValue:a(v),"onUpdate:modelValue":n[1]||(n[1]=m=>N(v)?v.value=m:null),options:a(O),placeholder:"All Partners",onChange:y},null,8,["modelValue","options"])]),_:1}),s(r,{label:"Unit"},{default:i(()=>[s(o,{modelValue:a(P),"onUpdate:modelValue":n[2]||(n[2]=m=>N(P)?P.value=m:null),options:a(z),placeholder:"All Units",disabled:!a(v),onChange:y},null,8,["modelValue","options","disabled"])]),_:1}),s(r,{label:"Month"},{default:i(()=>[s(g,{modelValue:a(A),"onUpdate:modelValue":n[3]||(n[3]=m=>N(A)?A.value=m:null),type:"month",onInput:y},null,8,["modelValue"])]),_:1})])]),_:1}),e("div",Ie,[s(p,null,{default:i(()=>[e("div",he,[e("div",ke,[s(x,{name:"i-heroicons-currency-dollar",class:"h-6 w-6 text-green-600 dark:text-green-400"})]),e("div",De,[n[8]||(n[8]=e("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Total Revenue",-1)),e("p",Ue,"â‚±"+_(a(F).toFixed(2)),1)])])]),_:1}),s(p,null,{default:i(()=>[e("div",we,[e("div",Ve,[s(x,{name:"i-heroicons-minus-circle",class:"h-6 w-6 text-red-600 dark:text-red-400"})]),e("div",Pe,[n[9]||(n[9]=e("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Total Expenses",-1)),e("p",Ae,"â‚±"+_(a($).toFixed(2)),1)])])]),_:1}),s(p,null,{default:i(()=>[e("div",Se,[e("div",Be,[s(x,{name:"i-heroicons-document-text",class:"h-6 w-6 text-blue-600 dark:text-blue-400"})]),e("div",Ne,[n[10]||(n[10]=e("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Bookings",-1)),e("p",Me,_(a(f).length),1)])])]),_:1}),s(p,null,{default:i(()=>[e("div",Re,[e("div",Ce,[s(x,{name:"i-heroicons-chart-bar",class:"h-6 w-6 text-purple-600 dark:text-purple-400"})]),e("div",Fe,[n[11]||(n[11]=e("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Net Profit",-1)),e("p",$e,"â‚±"+_((a(F)-a($)).toFixed(2)),1)])])]),_:1})]),e("div",Ee,[s(p,null,{header:i(()=>[e("h3",Te,"Bookings ("+_(a(f).length)+")",1)]),default:i(()=>[e("div",Le,[(k(!0),w(Y,null,q(a(f),m=>(k(),w("div",{key:m.id,class:"p-3 border rounded-lg"},[e("div",Oe,[e("div",null,[e("p",ze,_(m.guestName),1),e("p",Ge,_(E(m.unitId)),1),e("p",Je,_(c(m.date)),1)]),e("div",je,[e("p",Qe,"â‚±"+_(a(R)(m).toFixed(2)),1),e("span",{class:re(["inline-flex px-2 py-1 text-xs rounded-full",l(m.paymentStatus)])},_(m.paymentStatus.replace("_"," ")),3)])])]))),128)),a(f).length?J("",!0):(k(),w("div",Ye," No bookings found "))])]),_:1}),s(p,null,{header:i(()=>[e("h3",qe,"Expenses ("+_(a(U).length)+")",1)]),default:i(()=>[e("div",We,[(k(!0),w(Y,null,q(a(U),m=>(k(),w("div",{key:m.id,class:"p-3 border rounded-lg"},[e("div",He,[e("div",null,[e("p",Ke,_(u(m.type)),1),e("p",Xe,_(E(m.unitId)),1),e("p",Ze,_(c(m.date)),1)]),e("div",et,[e("p",tt,"â‚±"+_(m.amount.toFixed(2)),1)])])]))),128)),a(U).length?J("",!0):(k(),w("div",nt," No expenses found "))])]),_:1})]),s(I,{modelValue:a(b),"onUpdate:modelValue":n[4]||(n[4]=m=>N(b)?b.value=m:null)},null,8,["modelValue"])])}}});export{yt as default};
