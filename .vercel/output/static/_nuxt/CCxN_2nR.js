import{h as w,r,i as S,c as D,b as p,w as n,f as I,o as B,a as t,g as P,j as e,d as A,t as s}from"./DNOTuklV.js";import{u as C,a as E}from"./S143Cjw2.js";import{u as U}from"./BpUj2rcc.js";import{u as f}from"./DH4W2Tv0.js";const M={class:"max-w-2xl mx-auto"},F={class:"space-y-4"},N={class:"border-t pt-4"},R={class:"grid grid-cols-2 gap-4 text-sm"},T={class:"ml-2 font-medium"},V={class:"ml-2 font-medium"},j={class:"ml-2 font-medium"},q={class:"ml-2 font-medium"},L=w({__name:"refresh-data",setup(z){const{partners:x,loadFromStorage:l}=C(),{units:_,loadFromStorage:i}=E(),{getBookings:y,getExpenses:v}=U(),d=r([]),m=r([]),o=r(!1),b=async()=>{try{o.value=!0,localStorage.removeItem("metrobnb-partners"),localStorage.removeItem("metrobnb-units"),localStorage.removeItem("metrobnb-bookings"),localStorage.removeItem("metrobnb-expenses"),localStorage.removeItem("metrobnb-partner-earnings"),localStorage.removeItem("current-invoice"),await Promise.all([l(),i(),c(),g()]),f().add({title:"Data refreshed",description:"All data has been reloaded from mock API",color:"green"})}catch{f().add({title:"Error",description:"Failed to refresh data",color:"red"})}finally{o.value=!1}},c=async()=>{d.value=await y()},g=async()=>{m.value=await v()};return S(async()=>{await l(),await i(),await c(),await g()}),(u,a)=>{const k=P,h=I;return B(),D("div",M,[p(h,null,{header:n(()=>a[0]||(a[0]=[t("h3",{class:"text-lg font-semibold"},"Data Management",-1)])),default:n(()=>[t("div",F,[t("div",null,[a[2]||(a[2]=t("h4",{class:"font-medium text-gray-900 dark:text-white mb-2"},"Refresh Mock Data",-1)),a[3]||(a[3]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," This will clear all localStorage data and reload fresh mock data from the API. ",-1)),p(k,{onClick:b,loading:e(o),color:"primary"},{default:n(()=>a[1]||(a[1]=[A(" Refresh All Data ",-1)])),_:1,__:[1]},8,["loading"])]),t("div",N,[a[8]||(a[8]=t("h4",{class:"font-medium text-gray-900 dark:text-white mb-2"},"Current Data Status",-1)),t("div",R,[t("div",null,[a[4]||(a[4]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Partners:",-1)),t("span",T,s(e(x).length),1)]),t("div",null,[a[5]||(a[5]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Units:",-1)),t("span",V,s(e(_).length),1)]),t("div",null,[a[6]||(a[6]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Bookings:",-1)),t("span",j,s(e(d).length),1)]),t("div",null,[a[7]||(a[7]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Expenses:",-1)),t("span",q,s(e(m).length),1)])])])])]),_:1})])}}});export{L as default};
