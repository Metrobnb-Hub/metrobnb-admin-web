import{h as N,L as h,r as u,i as F,c as _,s as B,j as o,a as s,b as r,w as p,p as I,f as w,o as l,k as j,t as k,g as C,d as V}from"./DNOTuklV.js";import{_ as A}from"./ZVojOF0f.js";import{u as D}from"./bwWeQDxp.js";import"./DH4W2Tv0.js";const E={key:0,class:"flex justify-center py-12"},L={key:1,class:"max-w-4xl mx-auto"},R={class:"text-center py-12"},U={class:"text-gray-600 dark:text-gray-400 mb-6"},b={key:2},q=N({__name:"[id]",setup(P){const v=h(),{getInvoiceById:y}=I(),{notifyError:f}=D(),i=u(null),c=u(!0),d=u(""),x=async()=>{var m,t,n;try{c.value=!0;const a=await y(v.params.id);i.value={partnerName:a.partner_name,period:a.period,sharePercentage:a.share_percentage,bookings:((m=a.bookings)==null?void 0:m.map(e=>({date:e.date,endDate:e.end_date,guestName:e.guest_name,unitName:e.unit_name,source:e.booking_source_name,baseAmount:parseFloat(e.base_amount),addons:parseFloat(e.addons_total),total:parseFloat(e.total_amount),paymentReceivedBy:e.payment_received_by,actualAmountReceived:parseFloat(e.total_amount),bookingStatus:e.booking_status})))||[],expenses:((t=a.expenses)==null?void 0:t.map(e=>({date:e.date,unitName:e.unit_name,type:e.type,notes:e.notes,amount:parseFloat(e.amount)})))||[],journalEntries:((n=a.journal_entries)==null?void 0:n.map(e=>({date:e.date,type:e.type,description:e.description,reference:e.reference,amount:parseFloat(e.amount)})))||[]}}catch{d.value="Failed to load invoice details",f("Failed to load invoice")}finally{c.value=!1}};return F(()=>{x()}),(m,t)=>{const n=j,a=C,e=w,g=A;return o(c)?(l(),_("div",E,t[0]||(t[0]=[s("div",{class:"text-gray-500"},"Loading invoice...",-1)]))):o(d)?(l(),_("div",L,[r(e,null,{default:p(()=>[s("div",R,[r(n,{name:"i-heroicons-exclamation-triangle",class:"mx-auto h-12 w-12 text-red-400 mb-4"}),t[2]||(t[2]=s("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},"Invoice Not Found",-1)),s("p",U,k(o(d)),1),r(a,{to:"/invoices",color:"primary"},{default:p(()=>t[1]||(t[1]=[V("Back to Invoices",-1)])),_:1,__:[1]})])]),_:1})])):o(i)?(l(),_("div",b,[r(g,{invoice:o(i)},null,8,["invoice"])])):B("",!0)}}});export{q as default};
